@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Variables for Theme */
:root {
  /* Base Colors - Clean and Minimal */
  --background: 0 0% 98%;
  /* Slightly off-white for better contrast */
  --foreground: 0 0% 5%;
  /* Darker text for better readability */
  /* Near Black */
  --card: 0 0% 100%;
  /* Pure white cards for strong contrast */
  --card-foreground: 0 0% 5%;
  /* Dark text on cards */
  /* Near Black */
  --popover: 0 0% 100%;
  /* Pure White */
  --popover-foreground: 0 0% 9%;
  /* Near Black */

  /* Primary Blue - Elegant and Sophisticated */
  --primary: 211 100% 50%;
  /* Existing Blue */
  --primary-foreground: 0 0% 100%;
  /* White */
  --secondary: 0 0% 96%;
  /* Light Gray */
  --secondary-foreground: 0 0% 9%;
  /* Near Black */

  /* Grayscale System - Minimalist Approach */
  --muted: 0 0% 92%;
  /* Darker muted background */
  --muted-foreground: 0 0% 35%;
  /* Darker muted text for better readability */
  /* Medium Gray */
  --accent: 211 100% 50%;
  /* Blue Accent */
  --accent-foreground: 0 0% 100%;
  /* White */

  /* Semantic Colors - Refined */
  --destructive: 0 84% 60%;
  /* Refined Red */
  --destructive-foreground: 0 0% 100%;

  /* UI Elements */
  --border: 0 0% 85%;
  /* Darker borders for visibility */
  --input: 0 0% 94%;
  /* Slightly darker input background */
  /* Input Background */
  --ring: 211 100% 50%;
  /* Focus Ring */

  /* Radius */
  --radius: 0.75rem;
}

.dark {
  --background: 0 0% 0%;
  /* Pure Black Background */
  --foreground: 0 0% 98%;
  /* Near White Text */
  --card: 0 0% 3%;
  /* Very Dark Card */
  --card-foreground: 0 0% 98%;
  /* Near White Card Text */
  --popover: 0 0% 3%;
  /* Very Dark Popover */
  --popover-foreground: 0 0% 98%;
  /* Near White Popover Text */

  --primary: 211 100% 65%;
  /* Bright Blue for Black */
  --primary-foreground: 0 0% 0%;
  /* Black Text on Blue */
  --secondary: 0 0% 8%;
  /* Very Dark Secondary */
  --secondary-foreground: 0 0% 98%;
  /* Near White Secondary Text */

  --muted: 0 0% 5%;
  /* Very Dark Muted */
  --muted-foreground: 0 0% 70%;
  /* Light Gray Text */
  --accent: 211 100% 65%;
  /* Bright Blue Accent */
  --accent-foreground: 0 0% 0%;
  /* Black Accent Text */

  --destructive: 0 75% 70%;
  /* Bright Red for Black */
  --destructive-foreground: 0 0% 98%;

  --border: 0 0% 12%;
  /* Dark Border */
  --input: 0 0% 5%;
  /* Very Dark Input */
  --ring: 211 100% 65%;
  /* Bright Focus Ring */
}

/* Base Styles */
* {
  @apply border-border;
}

/* Prevent horizontal scroll */
html,
body {
  overflow-x: hidden;
  max-width: 100%;
  box-sizing: border-box;
}

/* Dynamic viewport height support - ajusta cuando el teclado aparece/desaparece */
/* Mejora para prevenir área negra cuando el teclado se cierra en mobile */
html {
  height: 100%;
  overflow: hidden;
  /* Previene scroll no deseado */
}

body {
  @apply bg-background text-foreground;
  font-feature-settings: "rlig" 1, "calt" 1;
  width: 100%;
  margin: 0;
  padding: 0;
  background-color: #000000;
  /* Pure black background */
  min-height: 100%;
  min-height: 100dvh;
  /* Dynamic viewport height - ajusta con teclado */
  /* ! Removed overflow: hidden to allow native scroll recovery after keyboard closes */
  overflow-x: hidden;
  /* Solo prevenir scroll horizontal */
  overflow-y: auto;
  /* Permitir scroll vertical natural para recuperación del viewport */
}

/* Contenedor raíz - debe usar viewport dinámico */
#root {
  /* * Usar CSS variable --app-height establecida por useViewportHeight hook */
  /* Fallback a 100dvh si la variable no está disponible */
  height: var(--app-height, 100dvh);
  width: 100%;
  overflow: hidden;
  position: relative;
}

/* Utility Classes */
.glass {
  @apply bg-white/10 backdrop-blur-md border border-white/20;
}

/* Foundation utilities (FinTec) */
.transition-ios {
  @apply transition-all duration-200 ease-out;
}

.transition-smooth {
  @apply transition-ios;
}

.focus-ring {
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background;
}

.focus-glow {
  @apply focus-ring;
}

.glass-card {
  @apply backdrop-blur-xl;
}

.glass-light {
  @apply backdrop-blur-md;
}

.hover-lift {
  @apply transform-gpu transition-ios hover:-translate-y-0.5 active:translate-y-0;
}

.micro-bounce {
  @apply active:scale-[0.98];
}

.hover-glow {
  @apply hover:shadow-glow;
}

/* Animation Classes */
@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Enhanced Animation Classes */
.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out;
}

.no-horizontal-scroll {
  overflow-x: hidden;
  max-width: 100%;
  box-sizing: border-box;
}

/* Black Theme Utilities */
.black-theme-header {
  background-color: rgba(8, 8, 8, 0.95) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(20px);
}

.black-theme-sidebar {
  background-color: rgba(8, 8, 8, 0.95) !important;
  border-right: 1px solid rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(20px);
}

.black-theme-card {
  background-color: rgba(8, 8, 8, 0.95) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  backdrop-filter: blur(20px);
}

/* Financial amount styling utility: stronger weight and tabular numbers */
.amount-strong {
  @apply font-semibold;
  font-variant-numeric: tabular-nums;
}

/* Vivid emphasis styles for monetary amounts */
.amount-emphasis-white {
  @apply amount-strong;
  color: #ffffff;
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.25);
}

.amount-positive {
  @apply amount-strong;
  color: #34d399;
  /* emerald-400 */
  text-shadow: 0 0 8px rgba(52, 211, 153, 0.25);
}

.amount-negative {
  @apply amount-strong;
  color: #f43f5e;
  /* rose-500 */
  text-shadow: 0 0 8px rgba(244, 63, 94, 0.25);
}

/* iOS Safari input visibility fix (dark theme) */
.dark input,
.dark textarea,
.dark select {
  color: #ffffff;
  caret-color: #ffffff;
  -webkit-text-fill-color: #ffffff;
  -webkit-appearance: none;
  appearance: none;
  background-clip: padding-box;
}

.dark input::placeholder,
.dark textarea::placeholder {
  color: rgba(255, 255, 255, 0.6);
}

/* Override iOS autofill styles to keep text visible on dark backgrounds */
.dark input:-webkit-autofill,
.dark textarea:-webkit-autofill,
.dark select:-webkit-autofill {
  -webkit-text-fill-color: #ffffff !important;
  transition: background-color 9999s ease-in-out 0s;
  box-shadow: 0 0 0px 1000px rgba(255, 255, 255, 0.08) inset;
}

/* Improve visibility of date inputs icons on iOS */
.dark input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(1) opacity(0.8);
}

/* Ensure disabled inputs with light backgrounds remain readable on iOS */
.dark input:disabled,
.dark textarea:disabled,
.dark select:disabled {
  -webkit-text-fill-color: #111111;
  /* readable on bg-gray-50 */
  color: #111111;
}

/* Utility to force input visibility in dark mode (overrides disabled input styling) */
.dark .input-force-visible {
  -webkit-text-fill-color: #ffffff !important;
  color: #ffffff !important;
}

/* Reduced motion: keep the iOS-like feel, but respect accessibility */
@media (prefers-reduced-motion: reduce) {
  .transition-ios {
    transition-duration: 0ms !important;
  }

  .hover-lift,
  .micro-bounce {
    transform: none !important;
  }

  .animate-fade-in,
  .animate-fade-in-up,
  .animate-slide-up,
  .animate-scale-in,
  .animate-wiggle,
  .animate-slide-in-right,
  .animate-gradient,
  .animate-bounce-gentle,
  .animate-pulse-soft,
  .animate-glow {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
  }
}

/* Dynamic viewport height support - previene área negra cuando el teclado se cierra */
.h-dynamic-screen {
  /* * Usar CSS variable --app-height con fallback a 100dvh */
  height: var(--app-height, 100dvh);
}

/* Utilidad para reemplazar min-h-screen problemático en mobile */
.min-h-dynamic-screen {
  /* * Usar CSS variable --app-height con fallback a 100dvh */
  min-height: var(--app-height, 100dvh);
}

/* Fix para iOS Safari - prevenir área negra cuando el teclado se cierra */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari específico - usar -webkit-fill-available como fallback adicional */
  /* ! Las utility classes .h-dynamic-screen y .min-h-dynamic-screen ya usan --app-height */
  /* ! que se actualiza dinámicamente, por lo que no necesitan override aquí */

  html {
    height: -webkit-fill-available;
  }

  body {
    min-height: -webkit-fill-available;
  }

  #root {
    /* Usar --app-height con fallback a -webkit-fill-available para iOS */
    height: var(--app-height, -webkit-fill-available);
  }
}